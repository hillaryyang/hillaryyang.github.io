---
layout: page
---

<div class="layout--extras">
  {%- if content != "" -%}
  <div class="extras-intro">
    {{ content }}
  </div>
  {%- endif -%}

  <section class="map-section">
    <h2 class="section-title">Places I've Been</h2>
    <div class="map-wrapper">
      <div id="chartdiv"></div>
      <button id="homeButton" class="home-button" title="Reset map view">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </button>
    </div>
  </section>
</div>

<!-- amCharts Resources -->
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/map.js"></script>
<script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

<script>
  am5.ready(function() {
    // Create root
    var root = am5.Root.new("chartdiv");

    // Set themes
    root.setThemes([am5themes_Animated.new(root)]);

    // Create map chart
    var chart = root.container.children.push(
      am5map.MapChart.new(root, {
        panX: "rotateX",
        panY: "translateY",
        projection: am5map.geoMercator(),
        homeZoomLevel: 1.4,
        homeGeoPoint: { longitude: 0, latitude: 20 }
      })
    );

    // Create polygon series (countries)
    var polygonSeries = chart.series.push(
      am5map.MapPolygonSeries.new(root, {
        geoJSON: am5geodata_worldLow,
        exclude: ["AQ"]
      })
    );

    polygonSeries.mapPolygons.template.setAll({
      tooltipText: "{name}",
      fill: am5.color(0xe0e0e0),
      strokeWidth: 0.5,
      stroke: am5.color(0xffffff)
    });

    polygonSeries.mapPolygons.template.states.create("hover", {
      fill: am5.color(0xaaaaaa)
    });

    // Create point series for markers
    var pointSeries = chart.series.push(am5map.MapPointSeries.new(root, {}));

    pointSeries.bullets.push(function(root, series, dataItem) {
      var placeType = dataItem.dataContext.placeType;
      var color = placeType === "home"
        ? am5.color(0x5cb85c)
        : am5.color(0xff6b6b);

      var circle = am5.Circle.new(root, {
        radius: 6,
        tooltipY: 0,
        fill: color,
        stroke: root.interfaceColors.get("background"),
        strokeWidth: 2,
        tooltipText: "{title}"
      });

      circle.states.create("hover", {
        radius: 8,
        scale: 1.2
      });

      return am5.Bullet.new(root, { sprite: circle });
    });

    // Load places data
    var places = {{ site.data.places | jsonify }};

    var cities = places.map(function(place) {
      return {
        geometry: {
          type: "Point",
          coordinates: [place.longitude, place.latitude]
        },
        title: place.title,
        placeType: place.type
      };
    });

    pointSeries.data.setAll(cities);

    // Animate on load
    chart.appear(1000, 100);

    // Home button
    document.getElementById('homeButton').addEventListener('click', function() {
      chart.goHome();
    });

    // Prevent scroll events from bubbling
    var chartDiv = document.getElementById('chartdiv');

    chartDiv.addEventListener('wheel', function(e) {
      e.stopPropagation();
    }, { passive: true });

    chartDiv.addEventListener('touchmove', function(e) {
      e.stopPropagation();
    }, { passive: false });

  }); // end am5.ready()
</script>

<style>
/* Extras page layout */
.layout--extras {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
}

.extras-intro {
  max-width: 800px;
  margin: 0 auto 3rem auto;
  text-align: center;
  font-size: 1.1rem;
  line-height: 1.6;
  color: #666;
}

.map-section {
  margin-top: 3rem;
  margin-bottom: 3rem;
}

.section-title {
  text-align: center;
  font-size: 2rem;
  margin-bottom: 2rem;
  color: #333;
  font-weight: 600;
}

.map-wrapper {
  position: relative;
  width: 100%;
  height: 600px;
  overflow: hidden;
}

#chartdiv {
  width: 100%;
  height: 100%;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.home-button {
  position: absolute;
  bottom: 20px;
  right: 20px;
  background: white;
  border: 1px solid #ddd;
  border-radius: 6px;
  padding: 10px 12px;
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

.home-button svg {
  color: #555;
  display: block;
}

.home-button:hover {
  background: #f8f8f8;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  transform: translateY(-1px);
}

.home-button:active {
  transform: scale(0.95);
}

/* Hide amCharts branding */
#chartdiv a[title*="JavaScript charts"],
#chartdiv a[title*="amCharts"],
#chartdiv .am5-logo,
#chartdiv div[class*="am5-logo"],
div[aria-label*="Chart created using amCharts"],
a[aria-label*="Chart created using amCharts"] {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
}

@media (max-width: 768px) {
  .map-wrapper {
    height: 400px;
  }

  .section-title {
    font-size: 1.5rem;
  }

  .extras-intro {
    margin: 0 auto 2rem auto;
    font-size: 1rem;
  }

  .home-button {
    bottom: 15px;
    right: 15px;
    padding: 8px 10px;
  }
}
</style>
